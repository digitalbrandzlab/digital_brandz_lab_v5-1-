const $=e=>document.querySelector(e),$$=e=>[...document.querySelectorAll(e)],clamp=(e,t,o)=>Math.max(t,Math.min(e,o));$('#year')&&($('#year').textContent=(new Date).getFullYear());$('#navToggle')?.addEventListener('click',(()=>{const e=document.querySelector('.nav');e&&(e.style.display='flex'===e.style.display?'none':'flex')}));const nav=$('#mainNav');if(nav){nav.addEventListener('click',(e=>{const t=e.target.closest('a[data-target]');if(!t)return;e.preventDefault();const o=t.dataset.target;document.getElementById(o)?.scrollIntoView({behavior:'smooth'})}));const e=['home','portfolio','about','services','packages','contact'].map((e=>document.getElementById(e)));function t(){const t=window.scrollY+140;for(const o of e){if(!o)continue;const n=o.offsetTop,a=n+o.offsetHeight;if(t>=n&&t<a){$$('#mainNav a').forEach((e=>e.classList.toggle('active',e.dataset.target===o.id)));break}}}window.addEventListener('scroll',t,{passive:!0}),t()}$('#hireTop')?.addEventListener('click',(()=>$('#contact')?.scrollIntoView({behavior:'smooth'}))),$('#floatingHire')?.addEventListener('click',(()=>$('#contact')?.scrollIntoView({behavior:'smooth'}))),$$('[data-goto]').forEach((e=>e.addEventListener('click',(e=>{const t=e.currentTarget.dataset.goto;document.getElementById(t)?.scrollIntoView({behavior:'smooth'})}))));!function(){const e=document.querySelector('#starfield');if(!e)return;const t=e.getContext('2d');let o,n,a=[];function d(){o=e.width=innerWidth,n=e.height=innerHeight}function i(){d(),a=Array.from({length:220},(()=>({x:Math.random()*o,y:Math.random()*n,z:Math.random()*1+.3,s:1.2*Math.random()+.2})))}function r(){t.clearRect(0,0,o,n);for(const e of a)e.x+=.4*e.z,e.y+=.1*e.z,(e.x>o||e.y>n)&&(e.x=.2*Math.random()*o,e.y=0,e.z=Math.random()*1+.3),t.globalAlpha=.55+.45*e.z,t.fillStyle='#dff3f6',t.fillRect(e.x,e.y,e.s,e.s);requestAnimationFrame(r)}window.addEventListener('resize',d),i(),r()}(),function(){const e=$$('.p-layer');e.length&&document.addEventListener('mousemove',(t=>{const o=t.clientX/innerWidth-.5,n=t.clientY/innerHeight-.5;e.forEach(((e,t)=>{const a=8*(t+1);e.style.transform=`translate(${(-o*a).toFixed(2)}px, ${(-n*a).toFixed(2)}px)`}))}))}(),function(){const e=document.querySelector('.hero-logo.tilt');if(!e)return;const t=12;function o(o){const n=e.getBoundingClientRect(),a=(o.clientX-n.left)/n.width-.5,d=(o.clientY-n.top)/n.height-.5;e.style.transform=`rotateX(${(-d*t).toFixed(2)}deg) rotateY(${(a*t).toFixed(2)}deg) scale(1.01)`}function n(){e.style.transform='rotateX(0) rotateY(0)'}e.addEventListener('mousemove',o),e.addEventListener('mouseleave',n)}(),function(){const e=document.querySelector('#logoBirth');if(!e)return;const t=e.getContext('2d');let o,n,a=[],d=0,i=!1;function r(){o=e.width=innerWidth,n=e.height=innerHeight}function l(){a=Array.from({length:320},(()=>{const e=2*Math.random()*Math.PI,t=Math.random()*Math.max(o,n)*.35+40;return{x:o/2+Math.cos(e)*t,y:n/2+Math.sin(e)*t,vx:0,vy:0}}))}function s(e){return 1-Math.pow(2,-10*e)}function c(){if(i)return;d+=1/60,t.clearRect(0,0,o,n);const c=s(Math.min(d/2,1));a.forEach((e=>{const a=o/2,d=n/2;e.x+=(a-e.x)*.055,e.y+=(d-e.y)*.055,t.globalAlpha=.8,t.fillStyle='#aef7f3',t.fillRect(e.x,e.y,2,2)})),t.globalAlpha=.12+.18*c;const h=t.createRadialGradient(o/2,n/2,10,o/2,n/2,Math.max(o,n)*.4);h.addColorStop(0,'rgba(24,230,224,0.6)'),h.addColorStop(1,'rgba(24,230,224,0)'),t.fillStyle=h,t.beginPath(),t.arc(o/2,n/2,Math.max(o,n)*.4,0,2*Math.PI),t.fill(),c>=1&&($('.hero-logo')?.classList.add('show'),e.style.transition='opacity 800ms ease',e.style.opacity='0',setTimeout((()=>{e.remove()}),900),i=!0);requestAnimationFrame(c)}r(),l(),c(),window.addEventListener('resize',(()=>{r()}))}(),function(){const e=document.querySelector('#storyModal');if(!e)return;const t=document.querySelector('#storyTitle'),o=document.querySelector('#storyBody');document.querySelectorAll('.btn.tiny[data-story]').forEach((n=>{n.addEventListener('click',(()=>{const[n,a]=n.dataset.story.split('|');t.textContent=n,o.textContent=a,e.classList.add('show')}))})),document.querySelector('#closeModal')?.addEventListener('click',(()=>e.classList.remove('show'))),e.addEventListener('click',(t=>{t.target===e&&e.classList.remove('show')}))}(),function(){const e=document.querySelector('#service'),t=document.querySelector('#pages'),o=document.querySelector('#quote');function n(){if(!o)return;let n=0;const a=e?.value,d=parseInt(t?.value||'0',10)||0;'web'===a?n=100*(d>0?d:1):'logo'===a?n=299:'app'===a?n=2e3:'marketing'===a?n=399:'integrations'===a&&(n=250),o.textContent=`$${n.toLocaleString()} USD`}e&&e.addEventListener('change',n),t&&t.addEventListener('input',n),n()}(),document.querySelectorAll('.purchase').forEach((e=>{e.addEventListener('click',(async t=>{const o=t.currentTarget.dataset.plan;try{const e=await fetch('/create-checkout-session',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({plan:o})}),t=await e.json();t.sessionId?Stripe(t.publishableKey||'pk_test_PLACEHOLDER').redirectToCheckout({sessionId:t.sessionId}):alert(t.error||'Checkout session failed.')}catch(e){console.error(e),alert('Network error creating checkout session.')}}))})),document.querySelector('#sendBtn')?.addEventListener('click',(()=>{const e=document.querySelector('#name').value.trim(),t=document.querySelector('#email').value.trim(),o=document.querySelector('#msg').value.trim();if(!e||!t||!o)return void alert('Please complete the form.');const n=encodeURIComponent('Quote request from '+e),a=encodeURIComponent(o+'\n\nService: '+(document.querySelector('#service')?.value||'')+'\nPages: '+(document.querySelector('#pages')?.value||'')+'\nContact: '+t);window.location.href=`mailto:you@yourdomain.com?subject=${n}&body=${a}`}));